<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>SabreDAV: SharingSupport Interface Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="SabreDAV.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">SabreDAV
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_sharing_support.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">SharingSupport Interface Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Inherits <a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_notification_support.html">NotificationSupport</a>.</p>

<p>Inherited by <a class="el" href="class_sabre_1_1_cal_d_a_v_1_1_backend_1_1_mock_sharing.html">MockSharing</a>.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad71d9775ae502c9d28902daef30cc8ef"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_sharing_support.html#ad71d9775ae502c9d28902daef30cc8ef">updateShares</a> ($calendarId, array $add, array $remove)</td></tr>
<tr class="separator:ad71d9775ae502c9d28902daef30cc8ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8289a0c9bba6e2b3ae77cf09f8fa9672"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_sharing_support.html#a8289a0c9bba6e2b3ae77cf09f8fa9672">getShares</a> ($calendarId)</td></tr>
<tr class="separator:a8289a0c9bba6e2b3ae77cf09f8fa9672"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bd328ce75dd80431124e1dd66c99f42"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_sharing_support.html#a9bd328ce75dd80431124e1dd66c99f42">shareReply</a> ($href, $status, $calendarUri, $inReplyTo, $summary=null)</td></tr>
<tr class="separator:a9bd328ce75dd80431124e1dd66c99f42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1347dacb2245b498c3f498b59ed52797"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_sharing_support.html#a1347dacb2245b498c3f498b59ed52797">setPublishStatus</a> ($calendarId, $value)</td></tr>
<tr class="separator:a1347dacb2245b498c3f498b59ed52797"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_notification_support"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_notification_support')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_notification_support.html">NotificationSupport</a></td></tr>
<tr class="memitem:aff514de4b496f863e071716f8dcc7849 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_notification_support"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_notification_support.html#aff514de4b496f863e071716f8dcc7849">getNotificationsForPrincipal</a> ($principalUri)</td></tr>
<tr class="separator:aff514de4b496f863e071716f8dcc7849 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_notification_support"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00bc8df9bc95d5014d5ab2b38ffabfc4 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_notification_support"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_notification_support.html#a00bc8df9bc95d5014d5ab2b38ffabfc4">deleteNotification</a> ($principalUri,\<a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_notifications_1_1_i_notification_type.html">Sabre\CalDAV\Notifications\INotificationType</a> $notification)</td></tr>
<tr class="separator:a00bc8df9bc95d5014d5ab2b38ffabfc4 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_notification_support"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface.html">BackendInterface</a></td></tr>
<tr class="memitem:a947af54f5824e1f6432f20114d228bfa inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface.html#a947af54f5824e1f6432f20114d228bfa">getCalendarsForUser</a> ($principalUri)</td></tr>
<tr class="separator:a947af54f5824e1f6432f20114d228bfa inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45bef2074a277ab184b9c394876eea46 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface.html#a45bef2074a277ab184b9c394876eea46">createCalendar</a> ($principalUri, $calendarUri, array $properties)</td></tr>
<tr class="separator:a45bef2074a277ab184b9c394876eea46 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3b032d1de07a0adca56ab9e3b770ab4 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface.html#ab3b032d1de07a0adca56ab9e3b770ab4">updateCalendar</a> ($calendarId,\<a class="el" href="class_sabre_1_1_d_a_v_1_1_prop_patch.html">Sabre\DAV\PropPatch</a> $propPatch)</td></tr>
<tr class="separator:ab3b032d1de07a0adca56ab9e3b770ab4 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4aebea7283df8e03b32c5311e9ba9a1 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface.html#ae4aebea7283df8e03b32c5311e9ba9a1">deleteCalendar</a> ($calendarId)</td></tr>
<tr class="separator:ae4aebea7283df8e03b32c5311e9ba9a1 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd2a63c95a850c89decb5d9dcb17ab29 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface.html#abd2a63c95a850c89decb5d9dcb17ab29">getCalendarObjects</a> ($calendarId)</td></tr>
<tr class="separator:abd2a63c95a850c89decb5d9dcb17ab29 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac41b6968c525e1076d6166bce943afdd inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface.html#ac41b6968c525e1076d6166bce943afdd">getCalendarObject</a> ($calendarId, $objectUri)</td></tr>
<tr class="separator:ac41b6968c525e1076d6166bce943afdd inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32056c2cb2b3afad3ffdcf1dd740d595 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface.html#a32056c2cb2b3afad3ffdcf1dd740d595">getMultipleCalendarObjects</a> ($calendarId, array $uris)</td></tr>
<tr class="separator:a32056c2cb2b3afad3ffdcf1dd740d595 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9811d6d38f6fc0ef3b6763ceb41adae9 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface.html#a9811d6d38f6fc0ef3b6763ceb41adae9">createCalendarObject</a> ($calendarId, $objectUri, $calendarData)</td></tr>
<tr class="separator:a9811d6d38f6fc0ef3b6763ceb41adae9 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ea2bfbc4f52889c767e63dfdb979410 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface.html#a9ea2bfbc4f52889c767e63dfdb979410">updateCalendarObject</a> ($calendarId, $objectUri, $calendarData)</td></tr>
<tr class="separator:a9ea2bfbc4f52889c767e63dfdb979410 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ff5c0e50aaa7e3cfe7255c8d72b8108 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface.html#a8ff5c0e50aaa7e3cfe7255c8d72b8108">deleteCalendarObject</a> ($calendarId, $objectUri)</td></tr>
<tr class="separator:a8ff5c0e50aaa7e3cfe7255c8d72b8108 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a142a02f6b828a0f809d4ae34cf6fc057 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface.html#a142a02f6b828a0f809d4ae34cf6fc057">calendarQuery</a> ($calendarId, array $filters)</td></tr>
<tr class="separator:a142a02f6b828a0f809d4ae34cf6fc057 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a150ae4308d105ca62ec3d0908890cf51 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface.html#a150ae4308d105ca62ec3d0908890cf51">getCalendarObjectByUID</a> ($principalUri, $uid)</td></tr>
<tr class="separator:a150ae4308d105ca62ec3d0908890cf51 inherit pub_methods_interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_backend_interface"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Adds support for sharing features to a <a class="el" href="namespace_sabre_1_1_cal_d_a_v.html">CalDAV</a> server.</p>
<p>Note: This feature is experimental, and may change in between different SabreDAV versions.</p>
<p>Early warning: Currently SabreDAV provides no implementation for this. This is, because in it's current state there is no elegant way to do this. The problem lies in the fact that a real <a class="el" href="namespace_sabre_1_1_cal_d_a_v.html">CalDAV</a> server with sharing support would first need email support (with invite notifications), and really also a browser-frontend that allows people to accept or reject these shares.</p>
<p>In addition, the <a class="el" href="namespace_sabre_1_1_cal_d_a_v.html">CalDAV</a> backends are currently kept as independent as possible, and should not be aware of principals, email addresses or accounts.</p>
<p>Adding an implementation for Sharing to standard-sabredav would contradict these goals, so for this reason this is currently not implemented, although it may very well in the future; but probably not before SabreDAV 2.0.</p>
<p>The interface works however, so if you implement all this, and do it correctly sharing <em>will</em> work. It's not particularly easy, and I <em>urge you</em> to make yourself acquainted with the following document first:</p>
<p><a href="https://trac.calendarserver.org/browser/CalendarServer/trunk/doc/Extensions/caldav-sharing.txt">https://trac.calendarserver.org/browser/CalendarServer/trunk/doc/Extensions/caldav-sharing.txt</a></p>
<h1>An overview </h1>
<p>Implementing this interface will allow a user to share his or her calendars to other users. Effectively, when a calendar is shared the calendar will show up in both the Sharer's and Sharee's calendar-home root. This interface adds a few methods that ensure that this happens, and there are also a number of new requirements in the base-class you must now follow.</p>
<h1>How it works </h1>
<p>When a user shares a calendar, the <a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_sharing_support.html#ad71d9775ae502c9d28902daef30cc8ef">updateShares()</a> method will be called with a list of sharees that are now added, and a list of sharees that have been removed. Removal is instant, but when a sharee is added the sharee first gets a chance to accept or reject the invitation for a share.</p>
<p>After a share is accepted, the calendar will be returned from getUserCalendars for both the sharer, and the sharee.</p>
<p>If the sharee deletes the calendar, only their share gets deleted. When the owner deletes a calendar, it will be removed for everybody.</p>
<h1><a class="el" href="namespace_sabre_1_1_cal_d_a_v_1_1_notifications.html">Notifications</a> </h1>
<p>During all these sharing operations, a lot of notifications are sent back and forward.</p>
<p>Whenever the list of sharees for a calendar has been changed (they have been added, removed or modified) all sharees should get a notification for this change. This notification is always represented by:</p>
<p><a class="el" href="namespace_sabre.html">Sabre</a></p>
<p>In the case of an invite, the sharee may reply with an 'accept' or 'decline'. These are always represented by:</p>
<p><a class="el" href="namespace_sabre.html">Sabre</a></p>
<h1><a class="el" href="class_sabre_1_1_cal_d_a_v_1_1_calendar.html">Calendar</a> access by sharees </h1>
<p>As mentioned earlier, shared calendars must now also be returned for getCalendarsForUser for sharees. A few things change though.</p>
<p>The following properties must be specified:</p>
<ol type="1">
<li>{<a href="http://calendarserver.org/ns/">http://calendarserver.org/ns/</a>}shared-url</li>
</ol>
<p>This property MUST contain the url to the original calendar, that is.. the path to the calendar from the owner.</p>
<ol type="1">
<li>{<a href="http://sabredav.org/ns">http://sabredav.org/ns</a>}owner-principal</li>
</ol>
<p>This is a url to to the principal who is sharing the calendar.</p>
<ol type="1">
<li>{<a href="http://sabredav.org/ns">http://sabredav.org/ns</a>}read-only</li>
</ol>
<p>This should be either 0 or 1, depending on if the user has read-only or read-write access to the calendar.</p>
<p>Only when this is done, the calendar will correctly be marked as a calendar that's shared to him, thus allowing clients to display the correct interface and ACL enforcement.</p>
<p>If a sharee deletes their calendar, only their instance of the calendar should be deleted, the original should still exists. Pretty much any 'dead' WebDAV properties on these shared calendars should be specific to a user. This means that if the displayname is changed by a sharee, the original is not affected. This is also true for:</p><ul>
<li>The description</li>
<li>The color</li>
<li>The order</li>
<li>And any other dead properties.</li>
</ul>
<p>Properties like a ctag should not be different for multiple instances of the calendar.</p>
<p>Lastly, objects <em>within</em> calendars should also have user-specific data. The two things that are user-specific are:</p><ul>
<li>VALARM objects</li>
<li>The TRANSP property</li>
</ul>
<p>This <em>also</em> implies that if a VALARM is deleted by a sharee for some event, this has no effect on the original VALARM.</p>
<p>Understandably, the this last requirement is one of the hardest. Realisticly, I can see people ignoring this part of the spec, but that could cause a different set of issues.</p>
<h1>Publishing </h1>
<p>When a user publishes a url, the server should generate a 'publish url'. This is a read-only url, anybody can use to consume the calendar feed.</p>
<p>Calendars are in one of two states:</p><ul>
<li>published</li>
<li>unpublished</li>
</ul>
<p>If a calendar is published, the following property should be returned for each calendar in getCalendarsForUser.</p>
<p>{<a href="http://calendarserver.org/ns/">http://calendarserver.org/ns/</a>}publish-url</p>
<p>This element should contain a {<a class="el" href="namespace_sabre_1_1_d_a_v.html">DAV</a>:}href element, which points to the public url that does not require authentication. Unlike every other href, this url must be absolute.</p>
<p>Ideally, the following property is always returned</p>
<p>{<a href="http://calendarserver.org/ns/">http://calendarserver.org/ns/</a>}pre-publish-url</p>
<p>This property should contain the url that the calendar <em>would</em> have, if it were to be published. iCal uses this to display the url, before the user will actually publish it.</p>
<h1>Selectively disabling publish or share feature </h1>
<p>If <a class="el" href="namespace_sabre.html">Sabre</a> is returned from getCalendarsForUser, this allows the server to specify whether either sharing, or publishing is supported.</p>
<p>This allows a client to determine in advance which features are available, and update the interface appropriately. If this property is not returned by the backend, the <a class="el" href="class_sabre_1_1_cal_d_a_v_1_1_sharing_plugin.html">SharingPlugin</a> automatically injects it and assumes both features are available.</p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (C) 2007-2014 fruux GmbH (<a href="https://fruux.com/">https://fruux.com/</a>). </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Evert Pot (<a href="http://evertpot.com/">http://evertpot.com/</a>)  <a href="http://sabre.io/license/">http://sabre.io/license/</a> Modified BSD License </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a8289a0c9bba6e2b3ae77cf09f8fa9672"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getShares </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$calendarId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the list of people whom this calendar is shared with.</p>
<p>Every element in this array should have the following properties:</p><ul>
<li>href - Often a mailto: address</li>
<li>commonName - Optional, for example a first + last name</li>
<li>status - See the <a class="el" href="namespace_sabre.html">Sabre</a>::STATUS_ constants.</li>
<li>readOnly - boolean</li>
<li>summary - Optional, a description for the share</li>
</ul>
<p>This method may be called by either the original instance of the calendar, as well as the shared instances. In the case of the shared instances, it is perfectly acceptable to return an empty array in case there are privacy concerns.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$calendarId</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array </dd></dl>

<p>Implemented in <a class="el" href="class_sabre_1_1_cal_d_a_v_1_1_backend_1_1_mock_sharing.html#a8289a0c9bba6e2b3ae77cf09f8fa9672">MockSharing</a>.</p>

</div>
</div>
<a class="anchor" id="a1347dacb2245b498c3f498b59ed52797"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setPublishStatus </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$calendarId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Publishes a calendar</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$calendarId</td><td></td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$value</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Implemented in <a class="el" href="class_sabre_1_1_cal_d_a_v_1_1_backend_1_1_mock_sharing.html#a1347dacb2245b498c3f498b59ed52797">MockSharing</a>.</p>

</div>
</div>
<a class="anchor" id="a9bd328ce75dd80431124e1dd66c99f42"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shareReply </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$href</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$calendarUri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$inReplyTo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$summary</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This method is called when a user replied to a request to share.</p>
<p>If the user chose to accept the share, this method should return the newly created calendar url.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype"></td><td class="paramname">string</td><td>href The sharee who is replying (often a mailto: address) </td></tr>
    <tr><td class="paramtype"></td><td class="paramname">int</td><td>status One of the SharingPlugin::STATUS_* constants </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$calendarUri</td><td>The url to the calendar thats being shared </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$inReplyTo</td><td>The unique id this message is a response to </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$summary</td><td>A description of the reply </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>null|string </dd></dl>

<p>Implemented in <a class="el" href="class_sabre_1_1_cal_d_a_v_1_1_backend_1_1_mock_sharing.html#a9bd328ce75dd80431124e1dd66c99f42">MockSharing</a>.</p>

</div>
</div>
<a class="anchor" id="ad71d9775ae502c9d28902daef30cc8ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">updateShares </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$calendarId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$add</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$remove</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates the list of shares.</p>
<p>The first array is a list of people that are to be added to the calendar.</p>
<p>Every element in the add array has the following properties:</p><ul>
<li>href - A url. Usually a mailto: address</li>
<li>commonName - Usually a first and last name, or false</li>
<li>summary - A description of the share, can also be false</li>
<li>readOnly - A boolean value</li>
</ul>
<p>Every element in the remove array is just the address string.</p>
<p>Note that if the calendar is currently marked as 'not shared' by and this method is called, the calendar should be 'upgraded' to a shared calendar.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$calendarId</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$add</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$remove</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Implemented in <a class="el" href="class_sabre_1_1_cal_d_a_v_1_1_backend_1_1_mock_sharing.html#ad71d9775ae502c9d28902daef30cc8ef">MockSharing</a>.</p>

</div>
</div>
<hr/>The documentation for this interface was generated from the following file:<ul>
<li>C:/Users/Nildric/PhpstormProjects/Syncbook/lib/SabreDAV/vendor/sabre/dav/lib/CalDAV/Backend/<a class="el" href="_sharing_support_8php.html">SharingSupport.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_sabre.html">Sabre</a></li><li class="navelem"><a class="el" href="namespace_sabre_1_1_cal_d_a_v.html">CalDAV</a></li><li class="navelem"><a class="el" href="namespace_sabre_1_1_cal_d_a_v_1_1_backend.html">Backend</a></li><li class="navelem"><a class="el" href="interface_sabre_1_1_cal_d_a_v_1_1_backend_1_1_sharing_support.html">SharingSupport</a></li>
    <li class="footer">Generated on Sat Feb 14 2015 18:58:13 for SabreDAV by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
